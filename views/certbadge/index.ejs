<!DOCTYPE html>
<html>
<head>
  <title>Badge</title>
  <style>
    .action-links { display: inline-block; margin-left: 10px; }
    .delete-form { display: inline; }
    .delete-btn {
      background: none;
      border: none;
      color: blue;
      text-decoration: underline;
      cursor: pointer;
      padding: 0;
    }
    table {
      border-collapse: collapse;
      width: 100%;
    }

    th,
    td {
      text-align: left;
      padding: 8px;
    }

    tr:nth-child(even) {
      background-color: #ece8b9
    }

    th {
      background-color: #f72929;
      color: white;
    }
  </style>
</head>
<body>
  <h2>Badges</h2>
  <p align="right"><a href="/certbadge/new">Add new badge</a></p>
  <% if (!certbadges || certbadges.length === 0) { %>
    <p>No badges found.</p>
  <% } else { %>

      <table cellpadding="6">
        <thead>
          <tr>
            <th>Badge Name</th>
            <th>Badge Description</th>
            <th>Event Date</th>
            <th>Badge Thumbnail</th>
            <th style="text-align: center;">Actions</th>
          </tr>
        </thead>
        <tbody>
             <% certbadges.forEach(function(badge) { %>
          <tr>
            <td><%= badge.badge_name %></td>
            <td><%= badge.badge_description %></td>
            <td><%= badge.created_at ? badge.created_at.toISOString().slice(0,10) : '' %></td>
            <td>
              <% if (badge.badge_image) { %>
                <img src="<%= badge.badge_image %>" alt="<%= badge.badge_name %>" style="max-width: 50px;">
              <% } %>
            </td>
            <td>
            <a href="/certbadge/edit/<%= badge.id %>">Edit</a> |
            <form class="delete-form" action="/certbadge/delete/<%= badge.id %>" method="POST" 
                  onsubmit="return confirm('Delete this badge?')">
              <button type="submit" class="delete-btn">Delete</button>
            </form>
            </td>
             <% }) %> 
        </tbody>
        </table>    
  <% } %>
</body>
</html>